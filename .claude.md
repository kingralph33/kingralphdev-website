# KingRalph.dev - Project Context

## Project Overview

This is a personal portfolio website showcasing professional experience, technical skills, and projects.

**Tech Stack:**
- React 19 with TypeScript
- Vite (build tool)
- Tailwind CSS v4 (styling)
- React Router v7 (routing)
- Playwright (E2E testing)
- pnpm (package manager)

**Key Features:**
- Dark mode support (localStorage + system preference)
- Fully responsive design
- Accessibility-focused (WCAG AA compliant)
- Performance optimized (Lighthouse scores 98-100)

## Architecture & File Structure

```
src/
├── components/
│   └── common/          # Shared components (Footer, Navbar)
├── layouts/             # Layout wrappers (MainLayout)
├── pages/               # Page components (About, etc.)
├── App.tsx              # Main app with routing
├── main.tsx             # Entry point
└── index.css            # Global styles & Tailwind config

e2e/                     # Playwright E2E tests
.claude/                 # Claude Code configuration
├── commands/            # Custom slash commands
└── settings.local.json  # Local settings
```

## Code Standards

### Components
- Use functional components with hooks
- TypeScript strict mode (no `any` types)
- Component naming: PascalCase for components, camelCase for utilities
- Export with `memo()` for performance when appropriate
- Keep components under 200 lines (refactor if larger)

### Styling
- **Primary:** Tailwind CSS utility classes
- Use Tailwind's responsive breakpoints: `sm:`, `md:`, `lg:`, `xl:`, `2xl:`
- Dark mode: Use `dark:` prefix for dark mode styles
- Custom utilities defined in `index.css` under `@layer components`
- **NO inline styles** - use Tailwind classes or CSS modules

### TypeScript
- Strict mode enabled
- Use explicit return types for functions
- Interface over type for object shapes
- Proper typing for React components, hooks, and events
- No `any` types - use `unknown` if truly necessary

### Accessibility
- **Required:** ARIA labels on all interactive elements
- Use semantic HTML (`<nav>`, `<main>`, `<footer>`, etc.)
- Add `aria-hidden="true"` to decorative icons
- Provide `aria-label` for icon-only buttons
- Ensure keyboard navigation works (test with Tab key)
- Maintain proper heading hierarchy (single h1, ordered h2-h6)

### State Management
- useState for component-local state
- useEffect for side effects and lifecycle
- localStorage for persistent state (dark mode preference)
- useRef for DOM references and click-outside detection

## Testing

### Framework: Playwright
- **Location:** `e2e/` directory
- **Config:** `playwright.config.ts`
- **Browser:** Chromium only (for speed)

### Test Coverage Requirements
- ✅ Page rendering and content
- ✅ Navigation and routing
- ✅ User interactions (clicks, toggles, dropdowns)
- ✅ Dark mode functionality and persistence
- ✅ Accessibility (ARIA labels, keyboard nav)
- ✅ Responsive behavior (desktop + mobile)
- ✅ External links open in new tabs

### Running Tests
```bash
pnpm test              # Run all tests headless
pnpm test:ui           # Open Playwright UI
pnpm test:headed       # Run with browser visible
pnpm test:debug        # Debug mode
```

### CI/CD Testing
- Tests run automatically on push/PR via GitHub Actions
- Must pass before merging to main/dev branches
- Chromium browser installed with `--with-deps` flag

## Development Workflow

### Getting Started
```bash
pnpm install           # Install dependencies
pnpm dev               # Start dev server (localhost:5173)
```

### Before Committing
```bash
pnpm type-check        # TypeScript compilation check
pnpm lint              # ESLint
pnpm test              # Run Playwright tests
```

### Available Commands
- `pnpm dev` - Development server
- `pnpm build` - Production build
- `pnpm preview` - Preview production build
- `pnpm test` - Run tests
- `pnpm lint` - Lint code
- `pnpm type-check` - Check TypeScript types

### Custom Slash Commands
Located in `.claude/commands/`:
- `/self-review` - Code review of recent changes
- `/pre-commit` - Pre-commit checks
- `/security-check` - Security analysis

## Component-Specific Notes

### Dark Mode Implementation
- Stored in localStorage as `'theme'` key
- Checks system preference on initial load
- Toggle button in Navbar (desktop + mobile)
- Applied via `dark` class on `<html>` element
- Persists across page navigation and reloads

### Navbar
- Fixed positioning (`fixed top-0`)
- Transparent background with backdrop blur
- Affiliates dropdown with click-outside-to-close behavior
- Mobile menu toggle for small screens
- Dark mode toggle on both desktop and mobile

### Footer
- Sticky footer with `mt-auto`
- Copyright year updates automatically
- Dark mode gradient background

### Routing
- React Router v7 with lazy loading
- MainLayout wraps all pages
- Suspense fallback for code-split pages

## Important Notes

### Recent Changes
- **Migrated from Jest to Playwright** (Oct 2024)
- Removed hero section, converted to simple intro
- Added comprehensive ARIA labels
- Dark mode toggle now available on mobile menu
- README.md updated to reflect Playwright and Cloudflare Pages deployment

## Deployment

**Platform:** Cloudflare Pages
**Trigger:** Automatic on push to `main` branch
**Build Command:** `pnpm build`
**Output Directory:** `dist`
**Node Version:** 22.x

## Browser Compatibility

- Chrome/Edge (latest 2 versions)
- Firefox (latest 2 versions)
- Safari (latest 2 versions)
- iOS Safari (latest 2 versions)
- Android Chrome (latest 2 versions)

## Performance Targets

- Lighthouse Performance: 95+ / 100
- Lighthouse Accessibility: 100 / 100
- Lighthouse Best Practices: 100 / 100
- Lighthouse SEO: 100 / 100
- Time to Interactive: < 1.5s
- First Contentful Paint: < 1.0s
